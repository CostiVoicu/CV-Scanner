{% extends "layout.html" %}

{% block title %}
    Scanner Results
{% endblock title %}

{% block header_title %}
    <h1>Scanner Results</h1>
{% endblock header_title %}

{% block content %}
    <ul class="list-group form-row">
        {% for file_url in file_data_urls %}
                Candidate {{ forloop.counter }}<br>
                <button type="button" class="show_pdf_btn col-md-1 btn btn-info btn-sm">Show CV</button>
            <div class="pdf_file" style="display: none">
                <iframe src="{{ file_url }}" width="600" height="400"></iframe>
            </div>
            <hr>
        {% endfor %}
    </ul>
{% endblock content %}

{% block script %}
    <script>
        const showButtons = document.querySelectorAll('.show_pdf_btn');

        showButtons.forEach(button => {
            button.addEventListener('click', () => {
                const pdfFile = button.nextElementSibling;

                if (pdfFile.style.display === 'block') {
                    pdfFile.style.display = 'none';
                } else {
                    document.querySelectorAll('.pdf_file').forEach(pdf => {
                        pdf.style.display = 'none';
                    });
                    pdfFile.style.display = 'block';
                }
            });
        });
    </script>
{% endblock script %}